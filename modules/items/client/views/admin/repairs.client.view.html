<div>        
    <fieldset class="form-group fieldset">
        <div>
            <legend ng-if="!report" class="text-success"><b>Resoluciones</b></legend>       
            
            <uib-accordion close-others="oneAtATime">
            <div ng-repeat="resolution in resolutions track by $index">    
                <div uib-accordion-group class="panel-default" is-open="resolution.open">  
                    <uib-accordion-heading>
                        <b># {{$index+1}} {{resolution.technician.name}}</b> / {{resolution.condition}} / {{resolution.date | date: 'dd-MMM-yyyy'}} / <b>Costo: {{resolution.cost | currency: '₡'}}</b><i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': item.open, 'glyphicon-chevron-right': !item.open}"></i>
                    </uib-accordion-heading>    
                      
                    <div class="form-group" ng-if="!readonly">
                        <div class="pull-left"><h4># {{$index+1}}</h4></div>                    
                    </div>
                    <br /><br />
                    <div class="form-group" show-errors ng-if="!readonly">
                        <label class="control-label" ng-if="showLabels" for="creationDate">Fecha de ingreso *</label>
                        <input name="creationDate" type="hidden" ng-model="resolution.creationDate" id="creationDate" class="form-control" required>
                        <datetimepicker 
                            ng-model="resolution.creationDate" 
                            hidden-time="true" 
                            date-format="dd-MMM-yyyy" 
                            current-text="Hoy"
                            clear-text="Limpiar"
                            close-text="Cerrar"></datetimepicker>          
                        <div ng-if="showLabels" ng-messages="form.$error" role="alert">
                            <p class="help-block error-text" ng-message="required">Fecha de ingreso es requerido.</p>
                        </div>
                    </div>
                    <div class="form-group" ng-if="!readonly">
                        <dropdowncontrol model="resolution.technician" collection="technicians" required="true" labelvalue="Técnico" fieldname="resolutionsTechnicianName_{{$index}}" form="form" simple="false" model-field-options="['workshop.name','name']" show-labels="showLabels"></dropdowncontrol>     
                    </div>
                    <div ng-if="readonly">
                        {{resolution.technician.name}}
                    </div>

                    <div class="form-group" ng-if="!readonly">
                        <dropdowncontrol model="resolution.condition" collection="conditions" required="true" labelvalue="Condición" fieldname="resolutionsCondition_{{$index}}" form="form" simple="true" show-labels="showLabels"></dropdowncontrol>     
                    </div>
                    <div ng-if="readonly">
                            {{resolution.condition}}
                    </div>

                    <div class="form-group" show-errors ng-if="!readonly">
                        <label class="control-label" ng-if="showLabels" for="resolutionsCost_{{$index}}">Costo ₡ <span ng-show="isTechnician">*</span></label>
                        <input name="resolutionsCost_{{$index}}" type="number" ng-model="resolution.cost" id="resolutionsCost_{{$index}}" autocomplete="off" class="form-control" placeholder="Costo técnico" ng-disabled="readonly" ng-required="isTechnician" /> 
                        <div ng-if="showLabels" ng-messages="form.$error" role="alert">
                            <p class="help-block error-text" ng-message="required">Costo es requerido.</p>
                        </div>
                    </div>
                    <div ng-if="readonly">
                            {{resolution.cost}}
                    </div>

                    <div class="form-group" show-errors ng-if="!readonly">
                        <label class="control-label" ng-if="showLabels" for="resolutionsObservations_{{$index}}">Observaciones <span ng-show="isTechnician">*</span></label>
                        <textarea name="resolutionsObservations_{{$index}}" ng-model="resolution.observations" id="resolutionsObservations_{{$index}}" autocomplete="off" class="form-control" placeholder="Observaciones" ng-disabled="readonly" ng-required="isTechnician" /> 
                        <div ng-if="showLabels" ng-messages="form.$error" role="alert">
                            <p class="help-block error-text" ng-message="required">Observaciones es requerido.</p>
                        </div>
                    </div>
                    <div ng-if="readonly">
                            {{resolution.observations}}
                    </div>
                    
                    <div class="form-group" show-errors ng-if="!readonly">
                        <label class="control-label" ng-if="showLabels" for="resolutionnDate">Fecha de resolución <span ng-show="isTechnician">*</span></label>
                        <input name="resolutionnDate" type="hidden" ng-model="resolution.date" id="resolutionnDate" class="form-control" ng-required="isTechnician">
                        <datetimepicker 
                            ng-model="resolution.date" 
                            hidden-time="true" 
                            date-format="dd-MMM-yyyy" 
                            current-text="Hoy"
                            clear-text="Limpiar"
                            close-text="Cerrar"></datetimepicker>          
                        <div ng-if="showLabels" ng-messages="form.$error" role="alert">
                            <p class="help-block error-text" ng-message="required">Fecha de resolución requerido.</p>
                        </div>
                    </div>
                    <div class="pull-right">
                        <a class="form-group btn btn-xs btn-danger" ng-click="removeResolution($index)" ng-if="!readonly">
                            <i class="glyphicon glyphicon-trash"></i> 
                            Eliminar Resolución         
                        </a> 
                    </div><br />
                    <hr /> 
                </div>                        
            </uib-accordion>  
        </div>        
        <a class="form-group btn btn-secondary" ng-click="addResolution()" ng-if="!readonly">
            <i class="glyphicon glyphicon-plus"></i>
            Agregar Técnico - Resolucion
        </a>  
    </fieldset>   
</div>