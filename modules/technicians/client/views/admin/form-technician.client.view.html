<section>
  <div class="page-header">
    <h1>{{vm.technician._id ? 'Editar Técnico' : 'Nuevo Técnico'}}</h1>
  </div>
  <div class="pull-right">
    <a ng-show="vm.technician._id" class="btn btn-primary" ng-click="vm.remove()">
      <i class="glyphicon glyphicon-trash"></i>
    </a>
  </div>
  <div class="row pull-left">
     <a class="btn btn-secondary" data-ui-sref="admin.technicians.list">
      <i class="glyphicon glyphicon-arrow-left"></i>
      Regresar
    </a>
  </div>
  <br /><br />
  <div class="col-md-12">
    <form name="vm.form.technicianForm" class="form-horizontal" ng-submit="vm.save(vm.form.technicianForm.$valid)" novalidate>
      <fieldset>
        <div class="form-group" show-errors>        
          <label class="control-label" for="workshops">Taller *</label>  
          <input name="workshops" type="hidden" ng-model="vm.technician.workshop" id="workshops" class="form-control" required>
          <div class="input-group select2-bootstrap-append">
            <ui-select ng-model="vm.technician.workshop">
              <ui-select-match  placeholder="Seleccione el taller...">
                    <span>{{$select.selected.name}}</span>
                </ui-select-match>
                <ui-select-choices repeat="item in (vm.workshops | filter: $select.search) track by item._id">
                    <div ng-bind-html="item.name | highlight: $select.search"></div>
                </ui-select-choices>
            </ui-select> 
            <span class="input-group-btn">
              <button type="button" ng-click="vm.technician.workshop = undefined" class="btn btn-default">
                <span class="glyphicon glyphicon-trash"></span>
              </button>
            </span>  
          </div> 
          <div ng-messages="vm.form.technicianForm.workshop.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Taller es requerido.</p>
          </div>
        </div>
        <div class="form-group" show-errors>
          <label class="control-label" for="technicianName">Nombre</label>
          <input name="technicianName" type="text" ng-model="vm.technician.name" id="technicianName" class="form-control" placeholder="Nombre" required autofocus>
          <div ng-messages="vm.form.technicianForm.name.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Nombre es requerido.</p>
          </div>
        </div>
        <div class="form-group" show-errors>
          <label class="control-label" for="technicianMobilePhone">Celular *</label>
          <input name="technicianMobilePhone" mask="9999-9999" mask-restrict="reject" placeholder="Celular" autocomplete="off" model-view-value="true" ng-model="vm.technician.mobilePhone" id="technicianMobilePhone" class="form-control" required />
          <div ng-messages="vm.form.technicianForm.technicianMobilePhone.$error" role="alert">
            <p class="help-block error-text" ng-message="required">Celular es requerido.</p>
          </div>
        </div>
        <div class="form-group" show-errors>
          <label class="control-label" for="technicianOtherPhone">Otro Teléfono</label>
          <input name="technicianOtherPhone" mask="9999-9999" mask-restrict="reject" placeholder="Otro Teléfono" autocomplete="off" model-view-value="true" ng-model="vm.technician.otherPhone" id="technicianOtherPhone" class="form-control" />
        </div>
        <div class="form-group" show-errors>
          <label class="control-label" for="technicianEmail">Email</label>
          <input name="technicianEmail" type="email" ng-model="vm.technician.email" id="technicianEmail" autocomplete="off" class="form-control" placeholder="Email">
          <div ng-messages="vm.form.technicianForm.technicianEmail.$error" role="alert">
            <p class="help-block error-text" ng-message="email">Email es incorrecto.</p>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label" for="technicianDescription">Descripción</label>
          <textarea name="technicianDescription" data-ng-model="vm.technician.description" id="technicianDescription" class="form-control" cols="30" rows="10" placeholder="Descripción"></textarea>
        </div>
        <div class="form-group">
          <button type="submit" class="btn btn-default">{{vm.technician._id ? 'Actualizar' : 'Crear'}}</button>
        </div>
      </fieldset>
    </form>
  </div>
</section>
